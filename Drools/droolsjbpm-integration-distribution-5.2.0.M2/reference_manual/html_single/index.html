<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Drools Integration User Guide</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL-NS Stylesheets V1.74.0"/></head><body><div class="book" lang="en-US"><div class="titlepage"><div><p xmlns:d="http://docbook.org/ns/docbook" id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e1"/>Drools Integration User Guide</h1></div><div><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="orgname"><a class="link" href="http://www.jboss.org/drools/team.html" target="">The JBoss Drools team</a></span></div><div class="editors"/><div class="others"/></div></div><div><p class="releaseinfo">5.2.0.M2</p></div></div><hr/></div><div class="toc"><dl><dt><span class="preface"><a href="#d0e19"/></span></dt><dt><span class="chapter"><a href="#d0e23">1. Apache Camel Integration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e26">1.1. Camel</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d0e76">2. Spring Integration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e79">2.1. Integration with Drools Expert</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e84">2.1.1. Define a Resource</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d0e488">3. Drools Server</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e491">3.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e496">3.2. Deployment</a></span></dt><dt><span class="section"><a href="#d0e501">3.3. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e542">3.3.1. REST/Camel Services configuration</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d0e614">4. Drools Commands</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e617">4.1. API</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e635">4.1.1. XStream</a></span></dt><dt><span class="section"><a href="#d0e652">4.1.2. JSON</a></span></dt><dt><span class="section"><a href="#d0e669">4.1.3. JAXB</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e702">4.2. Commands supported</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e782">4.2.1. BatchExecutionCommand</a></span></dt><dt><span class="section"><a href="#d0e850">4.2.2. InsertObjectCommand</a></span></dt><dt><span class="section"><a href="#d0e932">4.2.3. RetractCommand</a></span></dt><dt><span class="section"><a href="#d0e999">4.2.4. ModifyCommand</a></span></dt><dt><span class="section"><a href="#d0e1066">4.2.5. GetObjectCommand</a></span></dt><dt><span class="section"><a href="#d0e1134">4.2.6. InsertElementsCommand</a></span></dt><dt><span class="section"><a href="#d0e1216">4.2.7. FireAllRulesCommand</a></span></dt><dt><span class="section"><a href="#d0e1291">4.2.8. StartProcessCommand</a></span></dt><dt><span class="section"><a href="#d0e1361">4.2.9. SignalEventCommand</a></span></dt><dt><span class="section"><a href="#d0e1430">4.2.10. CompleteWorkItemCommand</a></span></dt><dt><span class="section"><a href="#d0e1497">4.2.11. AbortWorkItemCommand</a></span></dt><dt><span class="section"><a href="#d0e1558">4.2.12. QueryCommand</a></span></dt><dt><span class="section"><a href="#d0e1630">4.2.13. SetGlobalCommand</a></span></dt><dt><span class="section"><a href="#d0e1708">4.2.14. GetGlobalCommand</a></span></dt><dt><span class="section"><a href="#d0e1776">4.2.15. GetObjectsCommand</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d0e1844">5. OSGi Integration</a></span></dt><dt><span class="index"><a href="#d0e1902">Index</a></span></dt></dl></div><div class="preface" lang="en-US"><div class="titlepage"/><div class="mediaobject"><img src="images/droolsIntegrationLogo.png"/></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23"/>Chapter 1. Apache Camel Integration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e26">1.1. Camel</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26"/>1.1. Camel</h2></div></div></div><p>Camel provides a light weight bus framework for geting information
  into and out of Drools.</p><p>Drools introduces two elements to make easy integration.</p><div class="itemizedlist"><ul><li><p>Drools Policy</p><p>Augments any JAXB or XStream data loaders. For JAXB it adds drools
      related paths ot the contextpath, for XStream it adds custom converters
      and aliases for Drools classes. It also handles setting the ClassLoader
      to the targetted ksession.</p></li><li><p>Drools Endpoint</p><p>Executes the payload against the specified drools session</p></li></ul></div><p>Drools can be configured like any norma camel component, but notice
  the policy that wraps the drools related segments. This will route all
  payloads to ksession1</p><div class="example"><a id="d0e46"/><p class="title"><b>Example 1.1. Drools EndPoint configured with the CXFRS producer</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.camel.component.DroolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">camelContext</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;camel&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://camel.apache.org/schema/spring&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cxfrs://bean://rsServer&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">policy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">unmarshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;drools:node1/ksession1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">marshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">policy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p>It is possible to not specify the session in the drools endpoint uri,
  and instead "multiplex" based on an attribute or header. In this example the
  policy will check either the header field "DroolsLookup" for the named
  session to execute and if that isn't specified it'll check the "lookup"
  attribute on the incoming payload. It then attempts to "lookup" the session
  fron the execution-node context and execute against it.</p><div class="example"><a id="d0e53"/><p class="title"><b>Example 1.2. Drools EndPoint configured with the CXFRS producer</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.camel.component.DroolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">camelContext</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;camel&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://camel.apache.org/schema/spring&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cxfrs://bean://rsServer&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">policy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">unmarshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;drools:node1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">marshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">policy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><div class="example"><a id="d0e58"/><p class="title"><b>Example 1.3. Java Code to execute against Route from a Spring and Camel
    Context</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">public class MyTest extends CamelSpringTestSupport {
    
    @Override
    protected AbstractXmlApplicationContext createApplicationContext() {        
        return new ClassPathXmlApplicationContext("org/drools/camel/component/CxfRsSpring.xml");
    }  

    public void test1() throws Exception {
        String cmd = "";
        cmd += "&lt;batch-execution lookup=\"ksession1\"&gt;\n";
        cmd += "  &lt;insert out-identifier=\"salaboy\"&gt;\n";
        cmd += "      &lt;org.drools.pipeline.camel.Person&gt;\n";
        cmd += "         &lt;name&gt;salaboy&lt;/name&gt;\n";
        cmd += "      &lt;/org.drools.pipeline.camel.Person&gt;\n";
        cmd += "   &lt;/insert&gt;\n";
        cmd += "   &lt;fire-all-rules/&gt;\n";
        cmd += "&lt;/batch-execution&gt;\n";
                
        Object object = this.context.createProducerTemplate().requestBody("direct://client", cmd);
        System.out.println( object ); 
    }    </pre></div></div><br class="example-break"/><p>The following urls show sample script examples for jaxb, xstream and
  json marshalling using:</p><div class="itemizedlist"><ul><li><p>http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</p></li><li><p>http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</p></li><li><p>http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/xstream.mvt?r=HEAD</p></li></ul></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e76"/>Chapter 2. Spring Integration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e79">2.1. Integration with Drools Expert</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e84">2.1.1. Define a Resource</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e79"/>2.1. Integration with Drools Expert</h2></div></div></div><p>In this section we will explain the drools namespace.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e84"/>2.1.1. Define a Resource</h3></div></div></div><p>Execution nodes are a context to regsiter ksessions and kbases
      against for lookup.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e89"/>2.1.1.1. &lt;drools:execution-node&gt;'s parameters as
        attributes:</h4></div></div></div><div class="table"><a id="d0e92"/><p class="title"><b>Table 2.1. </b></p><div class="table-contents"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Description</th><th align="center">Required</th></tr></thead><tbody><tr><td align="left">id</td><td align="left">Bean's <span class="emphasis"><em>id</em></span> is the name to be
                reference from other beans.</td><td align="left">Yes</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e113"/>2.1.1.2. &lt;drools:resource&gt;'s parameters as attributes:</h4></div></div></div><div class="table"><a id="d0e116"/><p class="title"><b>Table 2.2. </b></p><div class="table-contents"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Description</th><th align="center">Required</th></tr></thead><tbody><tr><td align="left">id</td><td align="left">Bean's <span class="emphasis"><em>id</em></span> is the name to be
                reference from other beans.</td><td align="left">Yes, but can be omitted when this tag is
                nested.</td></tr><tr><td align="left">source</td><td align="left">The path to the file containing the actual
                resource.</td><td align="left">Yes</td></tr><tr><td align="left">type</td><td align="left">Type of the Resource as is defined in class
                <code class="classname">ResourceType</code>.</td><td align="left">No, default to DRL</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e154"/>2.1.1.3. &lt;drools:resource&gt;'s parameters as nested
        elements:</h4></div></div></div><p>When configuring a <span class="emphasis"><em>decision table</em></span> resource
        you can nest a <span class="emphasis"><em>&lt;drools:decisiontable-conf&gt;</em></span>
        tag to configure the resource.</p><div class="table"><a id="d0e165"/><p class="title"><b>Table 2.3. </b></p><div class="table-contents"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Description</th><th align="center">Required</th></tr></thead><tbody><tr><td align="left">input-type</td><td align="left">Decision Table input type: XLS or CSV</td><td align="left">No</td></tr><tr><td align="left">worksheet-name</td><td align="left">The worksheet name to be used in the when using an
                XLS</td><td align="left">No</td></tr></tbody></table></div></div><br class="table-break"/><div class="example"><a id="d0e190"/><p class="title"><b>Example 2.1. resource definition example</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resource</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">source</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:org/drools/IntegrationExampleTest.xls&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DTABLE&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:decisiontable-conf</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">input-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;XLS&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">worksheet-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Tables_2&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:resource</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e195"/>2.1.1.4. Define a KnowledgeBase</h4></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e198"/>2.1.1.4.1. &lt;drools:kbase&gt;'s parameters as attributes:</h5></div></div></div><div class="table"><a id="d0e201"/><p class="title"><b>Table 2.4. </b></p><div class="table-contents"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Description</th><th align="center">Required</th></tr></thead><tbody><tr><td align="left">id</td><td align="left">Bean's <span class="emphasis"><em>id</em></span> is the name to be
                  referenced from other beans.</td><td align="left">Yes</td></tr><tr><td align="left">node</td><td align="left">Execution-Node context to register the kbase
                  with</td><td align="left">no</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e229"/>2.1.1.4.2. &lt;drools:kbase&gt;'s parameters as nested elements:</h5></div></div></div><p>A Knowledge Base has a 0..n resources. Has two nested
          elements, resources and configuratoins. Thoe resources can be inner
          elements or references, using the "ref" attribute.</p><div class="example"><a id="d0e234"/><p class="title"><b>Example 2.2. kbase definition example</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:kbase</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbase1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">node</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;node1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resource</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">source</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:org/drools/spring/IntegrationExampleTest.xls&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DTABLE&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:decisiontable-conf</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">input-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;XLS&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">worksheet-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Table_2&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:resource</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resource</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;resource1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resource</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">source</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:org/drools/container/spring/model.xsd&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:mbeans</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:accumulate-functions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:accumulate-function</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;func1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;func1Instance&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:accumulate-function</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;func1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;func2Instance&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:accumulate-functions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:kbase</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><div class="figure"><a id="d0e239"/><div class="figure-contents"><div class="itemizedlist"><ul><li><p>advanced-process-rule-integration</p><div class="itemizedlist"><ul><li><p>enabled = true : false</p></li></ul></div></li><li><p>multithread</p><div class="itemizedlist"><ul><li><p>enabled = true : false</p></li><li><p>max-threads = 1..n</p></li></ul></div></li><li><p>mbeans</p><div class="itemizedlist"><ul><li><p>enabled = true : false</p></li></ul></div></li><li><p>event-processing-mode</p><div class="itemizedlist"><ul><li><p>mode = STREAM : CLOUD</p></li></ul></div></li><li><p>accumulate-functions</p><div class="itemizedlist"><ul><li><p>accumulate-function 0..n</p><div class="itemizedlist"><ul><li><p>name = String</p></li><li><p>ref = String</p></li></ul></div></li></ul></div></li><li><p>evaluators</p><div class="itemizedlist"><ul><li><p>evaluator 0..n</p><div class="itemizedlist"><ul><li><p>name = String</p></li><li><p>ref = String</p></li></ul></div></li></ul></div></li><li><p>assert-behavior</p><div class="itemizedlist"><ul><li><p>mode = IDENTITY : EQUALITY</p></li></ul></div></li></ul></div></div><p class="title"><b>Figure 2.1. Knowledge Base Configuration Options</b></p></div><br class="figure-break"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e309"/>2.1.1.5. Define KnowledgeSessions</h4></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e312"/>2.1.1.5.1. &lt;drools:ksession&gt;'s parameters as attributes:</h5></div></div></div><div class="table"><a id="d0e315"/><p class="title"><b>Table 2.5. </b></p><div class="table-contents"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Description</th><th align="center">Required</th></tr></thead><tbody><tr><td align="left">id</td><td align="left">Bean's <span class="emphasis"><em>id</em></span> is the name to be
                  referenced from other beans.</td><td align="left">Yes</td></tr><tr><td align="left">type</td><td align="left">is the session <span class="emphasis"><em>stateful</em></span> or
                  <span class="emphasis"><em>stateless?</em></span></td><td align="left">Yes</td></tr><tr><td align="left">name</td><td align="left"> </td><td align="left">No; defaults to <span class="emphasis"><em>id</em></span> when
                  omitted.</td></tr><tr><td align="left">node</td><td align="left">Execution-Node context to register the ksession
                  with</td><td align="left">no</td></tr></tbody></table></div></div><br class="table-break"/><div class="example"><a id="d0e364"/><p class="title"><b>Example 2.3. ksession definition example</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:ksession</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateless&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateless1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">kbase</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbase1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:ksession</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession2&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateful&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">kbase</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbase1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:ksession</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession3&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateful&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">kbase</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbase2</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&lt;</span><span class="xml_attribute_name">drools:batch</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:insert-object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:set-global</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;list1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:set-global</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:startProcess</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">process-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;start&nbsp;fire&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:batch</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:configurations</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:keep-reference</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:clock-type</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PSEUDO&quot;</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:configurations</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:ksession</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><div class="figure"><a id="d0e369"/><div class="figure-contents"><div class="itemizedlist"><ul><li><p>keep-reference</p><div class="itemizedlist"><ul><li><p>enabled = true : false</p></li></ul></div></li><li><p>clock-type</p><div class="itemizedlist"><ul><li><p>type = REALTIME : PSEUDO</p></li></ul></div></li><li><p>jpa-persistence</p><div class="itemizedlist"><ul><li><p>transaction-manager</p><div class="itemizedlist"><ul><li><p>ref = String</p></li></ul></div></li><li><p>entity-manager-factory</p><div class="itemizedlist"><ul><li><p>ref = String</p></li></ul></div></li><li><p>variable-persisters</p><div class="itemizedlist"><ul><li><p>for-class = String</p></li><li><p>implementation = String</p></li></ul></div></li></ul></div></li></ul></div></div><p class="title"><b>Figure 2.2. Knowledge Session Configuration Options</b></p></div><br class="figure-break"/><div class="figure"><a id="d0e415"/><div class="figure-contents"><div class="itemizedlist"><ul><li><p>insert-object</p><div class="itemizedlist"><ul><li><p>ref = String (optional)</p></li><li><p>Anonymous bean</p></li></ul></div></li><li><p>set-global</p><div class="itemizedlist"><ul><li><p>identifier = String (required)</p></li></ul></div><div class="itemizedlist"><ul><li><p>reg = String (optiona)</p></li><li><p>Anonymous bean</p></li></ul></div></li><li><p>fire-all-rules</p><div class="itemizedlist"><ul><li><p>max : n</p></li></ul></div></li><li><p>fire-until-halt</p></li><li><p>start-process</p><div class="itemizedlist"><ul><li><p>parameter</p><div class="itemizedlist"><ul><li><p>identifier = String (required)</p></li><li><p>ref = String (optional)</p></li><li><p>Anonymous bean</p></li></ul></div></li></ul></div></li><li><p>signal-event</p><div class="itemizedlist"><ul><li><p>ref = String (optional)</p></li><li><p>event-type = String (required)</p></li><li><p>process-instance-id =n (optional)</p></li></ul></div></li></ul></div></div><p class="title"><b>Figure 2.3. Initialization Batch Commands</b></p></div><br class="figure-break"/><div class="example"><a id="d0e483"/><p class="title"><b>Example 2.4. ksession JPA configuraiton example</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:kstore</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kstore&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;provides&nbsp;KnowledgeStoreService&nbsp;implementation&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myEmf&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dataSource&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ds&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.persistence.jpa.local&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;txManager&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManagerFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myEmf&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:ksession</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jpaSingleSessionCommandService&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateful&quot;</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">kbase</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbProcessWorkItems&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:jpa-persistence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:transaction-manager</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;txManager&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:entity-manager-factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myEmf&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:jpa-persistence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:ksession</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/></div></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e488"/>Chapter 3. Drools Server</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e491">3.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e496">3.2. Deployment</a></span></dt><dt><span class="section"><a href="#d0e501">3.3. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e542">3.3.1. REST/Camel Services configuration</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e491"/>3.1. Introduction</h2></div></div></div><p>The drools execution server (drools-server) module is a war which you
  can deploy to execute KnowledgeBases remotely for any sort of client
  application. This is not limited to JVM application clients, but any
  technology that can use HTTP, through a REST interface. This version of the
  execution server supports stateless and statefull sessions in a native
  way.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e496"/>3.2. Deployment</h2></div></div></div><p>Drools Server is a war file, which can be deployed in a application
  server (such as JBoss AS). As the service is stateless, it is possible to
  have have as many of these services deployed as you need to serve the client
  load. Deploy on JBoss AS 4.x / Tomcat 6.x works out-of-the-box, instead some
  external dependencies must be added and the configuration must be changed to
  be deployed in JBoss AS 5</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e501"/>3.3. Configuration</h2></div></div></div><p>Inside the war file you will find a few XML configuration
  files.</p><div class="itemizedlist"><ul><li><p>breans.xml</p><div class="itemizedlist"><ul><li><p>Skeleton xml that imports knowledge-services.xml and
          camel-server.xml</p></li></ul></div></li><li><p>camel-server.xml</p><div class="itemizedlist"><ul><li><p>Configures CXF endpoints with Camel Routes</p></li><li><p>Came Routes pipeline messages to various configured knowledge
          services</p></li></ul></div></li><li><p>knowledge-services.xml</p><div class="itemizedlist"><ul><li><p>Various Knowege Bases and Sessions</p></li></ul></div></li><li><p>camel-client.xml</p><div class="itemizedlist"><ul><li><p>Sample camel client showing how to send and receive a
          message</p></li><li><p>Used by "out of the box" test.jsp</p></li></ul></div></li></ul></div><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e542"/>3.3.1. REST/Camel Services configuration</h3></div></div></div><p>The next step is configure the services that are going to be exposed
    through drools-server. You can modify this configuration in
    camel-server.xml file.</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">beans</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.springframework.org/schema/beans&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:cxf</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://camel.apache.org/schema/cxf&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:jaxrs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://cxf.apache.org/jaxrs&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;http://camel.apache.org/schema/cxf&nbsp;http://camel.apache.org/schema/cxf/camel-cxf.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;http://cxf.apache.org/jaxrs&nbsp;http://cxf.apache.org/schemas/jaxrs.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;http://camel.apache.org/schema/spring&nbsp;http://camel.apache.org/schema/spring/camel-spring.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:META-INF/cxf/cxf.xml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:META-INF/cxf/cxf-servlet.xml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;running&nbsp;on&nbsp;JBoss&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;copy&nbsp;a&nbsp;camel-jboss.jar&nbsp;into&nbsp;the&nbsp;lib&nbsp;and&nbsp;set&nbsp;this&nbsp;classloader&nbsp;configuration&nbsp;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;http://camel.apache.org/camel-jboss.html</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;jbossResolver&quot;&nbsp;class=&quot;org.apache.camel.jboss.JBossPackageScanClassResolver&quot;/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;Define&nbsp;the&nbsp;server&nbsp;end&nbsp;point.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;Copy&nbsp;and&nbsp;paste&nbsp;this&nbsp;element,&nbsp;changing&nbsp;id&nbsp;and&nbsp;the&nbsp;address,&nbsp;to&nbsp;expose&nbsp;services&nbsp;on&nbsp;different&nbsp;urls.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;Different&nbsp;Camel&nbsp;routes&nbsp;can&nbsp;handle&nbsp;different&nbsp;end&nbsp;point&nbsp;paths.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cxf:rsServer</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rsServer&quot;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">address</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/kservice/rest&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">serviceClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.jax.rs.CommandExecutorImpl&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cxf:providers</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.jax.rs.CommandMessageBodyReader&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">cxf:providers</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">cxf:rsServer</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Leave&nbsp;this,&nbsp;as&nbsp;it's&nbsp;needed&nbsp;to&nbsp;make&nbsp;Camel&nbsp;&quot;drools&quot;&nbsp;aware&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.camel.component.DroolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">camelContext</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;camel&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://camel.apache.org/schema/spring&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!&nbsp;Routes&nbsp;incoming&nbsp;messages&nbsp;from&nbsp;end&nbsp;point&nbsp;id=&quot;rsServer&quot;.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!&nbsp;Example&nbsp;route&nbsp;unmarshals&nbsp;the&nbsp;messages&nbsp;with&nbsp;xstream&nbsp;and&nbsp;executes&nbsp;against&nbsp;ksession1.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!&nbsp;Copy&nbsp;and&nbsp;paste&nbsp;this&nbsp;element,&nbsp;changing&nbsp;marshallers&nbsp;and&nbsp;the&nbsp;'to'&nbsp;uri,&nbsp;to&nbsp;target&nbsp;different&nbsp;sessions,&nbsp;as&nbsp;needed.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cxfrs://bean://rsServer&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">policy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">unmarshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;drools:node1/ksession1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">marshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">policy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">camelContext</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">beans</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
</pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e549"/>3.3.1.1. RESTful service endpoint creation</h4></div></div></div><p>In the next xml snippet code we are creating a RESTful (JAX-RS)
      endpoint binded to /kservice/rest address and using
      org.drools.jax.rs.CommandExecutorImpl as the service implementor. This
      class is only used to instantiate the service endpoint because all the
      internal implementation is managed by Camel, and you can see in the
      source file that the exposed execute service must be never
      called.</p><p>Also a JAX-RS Provider is provided to determine if the message
      transported can be processed in this service endpoint.</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cxf:rsServer</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rsServer&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">address</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/kservice/rest&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">serviceClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.jax.rs.CommandExecutorImpl&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cxf:providers</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.jax.rs.CommandMessageBodyReader&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">cxf:providers</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">cxf:rsServer</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Ideally this configuration doesn’t need to be modified, at least
      the Service Class and the JAX-RS Provider, but you can add more
      endpoints associated to different addresses to use them in anothers
      Camel Routes.</p><p>After all this initial configuration, you can start config your
      own Knowledge Services.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e562"/>3.3.1.2. Camel Drools Policy &amp; Context creation</h4></div></div></div><p>DroolsPolicy is used to add Drools support in Camel, basically
      what it does is to add interceptors into the camel route to create Camel
      Processors on the fly and modify the internal navigation route. If you
      want to have SOAP support you need to create your custom Drools Policy,
      but it's going to be added in the next release.</p><p>But you don’t need to know more internal details, only instantiate
      this bean:</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.camel.component.DroolsPolicy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>The next is create the camel route that will have the
      responsibility to execute the commands sent through JAX-RS. Basically we
      create a route definition associated with the JAX-RS definition as the
      data input, the camel policy to be used and inside the “execution route”
      or ProcessorDefinitions. As you can see, we set XStream as the
      marshaller/unmarshaller and the drools execution route definition</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">camelContext</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;camel&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://camel.apache.org/schema/spring&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cxfrs://bean://rsServer&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">policy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">unmarshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;drools:node1/ksession1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">marshal</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xstream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">policy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">camelContext</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>The drools endpoint creation has the next arguments</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML">&lt;!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --&gt;
&lt;span class="xml_tag_symbols"&gt;&amp;lt;&lt;/span&gt;&lt;span class="xml_tag_name"&gt;to&lt;/span&gt;&lt;span class="xml_plain"&gt;&amp;nbsp;&lt;/span&gt;&lt;span class="xml_attribute_name"&gt;uri&lt;/span&gt;&lt;span class="xml_tag_symbols"&gt;=&lt;/span&gt;&lt;span class="xml_attribute_value"&gt;&amp;quot;drools:{1}/{2}&amp;quot;&lt;/span&gt;&lt;span class="xml_plain"&gt;&amp;nbsp;&lt;/span&gt;&lt;span class="xml_tag_symbols"&gt;/&amp;gt;&lt;/span&gt;&lt;span class="xml_plain"&gt;&lt;/span&gt;&lt;br /&gt;
</pre><div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Execution Node identifier that is registered in the
          CamelContext</p></li><li><p>Knowledge Session identifier that was registered in the
          Execution Node with identifier {1}</p></li></ol></div><p>Both parameters are configured in knowledge-services.xml
      file.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e589"/>3.3.1.3. Knowledge Services configuration</h4></div></div></div><p>The next step is create the Knowledge Sessions that you are going
      to use.</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">beans</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.springframework.org/schema/beans&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:drools</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://drools.org/schema/drools-spring&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://drools.org/schema/drools-spring&nbsp;http://drools.org/schema/drools-spring.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:execution-node</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;node1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:kbase</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbase1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">node</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;node1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resource</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;XSD&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">source</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:model.xsd&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:resource</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DRL&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">source</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;classpath:test.drl&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:kbase</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:ksession</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateless&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">kbase</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;kbase1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">node</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;node1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">beans</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>The execution-node is a context or registered kbases and
      ksessions, here kbase1 and ksession1 are planed in the node1 context.
      The kbase itself concists of tow knoeldge defiitions, a drl and an xsd.
      The Spring documentaiton contains a lot more information on configuring
      these knowledge services.</p><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e599"/>3.3.1.4. Test</h4></div></div></div><p>With drools-server war unzipped you should be able to see a
      test.jsp and run it. This example just executes a simple "echo" type
      application. It sends a message to the rule server that pre-appends the
      word "echo" to the front and sends it back. By default the message is
      "Hello World", different messages can be passed using the url parameter
      msg - test.jsp?msg="My Custom Message".</p><p>Under the hood the jsp invokes the Test.java class, this then
      calls out to Camel which is where the meet happens. The camel-client.xml
      defines the client with just a few lines of xml:</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">camelContext</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;camel&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://camel.apache.org/schema/spring&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;direct://kservice&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">policy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;droolsPolicy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cxfrs://http://localhost:8080/drools-server-app/kservice/rest&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">policy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">route</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">camelContext</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>"direct://kservice" is just a named hook, allowing java to grab a
      reference and push data into it. In this example the data is already in
      xml, so we don't need to add any DataFormat's to do the marshalling. The
      DroolsPolicy adds some smarts to the route and you'll see it used on the
      server side too. If JAXB or XStream were used, it would inject custom
      paths and converters, it can also set the classloader too on the server
      side, on the client side it automatically unwrapes the Response
      object.</p><p>The rule itself can be found here: test.drl. Notice the type
      Message is declared part of the drl and is thus not present on the
      Classpath.</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">declare Message
   text : String
end
    
  
rule "echo" dialect "mvel"
when
   $m : Message();
then
   $m.text = "echo:" + $m.text;
end
</pre></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e614"/>Chapter 4. Drools Commands</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e617">4.1. API</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e635">4.1.1. XStream</a></span></dt><dt><span class="section"><a href="#d0e652">4.1.2. JSON</a></span></dt><dt><span class="section"><a href="#d0e669">4.1.3. JAXB</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e702">4.2. Commands supported</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e782">4.2.1. BatchExecutionCommand</a></span></dt><dt><span class="section"><a href="#d0e850">4.2.2. InsertObjectCommand</a></span></dt><dt><span class="section"><a href="#d0e932">4.2.3. RetractCommand</a></span></dt><dt><span class="section"><a href="#d0e999">4.2.4. ModifyCommand</a></span></dt><dt><span class="section"><a href="#d0e1066">4.2.5. GetObjectCommand</a></span></dt><dt><span class="section"><a href="#d0e1134">4.2.6. InsertElementsCommand</a></span></dt><dt><span class="section"><a href="#d0e1216">4.2.7. FireAllRulesCommand</a></span></dt><dt><span class="section"><a href="#d0e1291">4.2.8. StartProcessCommand</a></span></dt><dt><span class="section"><a href="#d0e1361">4.2.9. SignalEventCommand</a></span></dt><dt><span class="section"><a href="#d0e1430">4.2.10. CompleteWorkItemCommand</a></span></dt><dt><span class="section"><a href="#d0e1497">4.2.11. AbortWorkItemCommand</a></span></dt><dt><span class="section"><a href="#d0e1558">4.2.12. QueryCommand</a></span></dt><dt><span class="section"><a href="#d0e1630">4.2.13. SetGlobalCommand</a></span></dt><dt><span class="section"><a href="#d0e1708">4.2.14. GetGlobalCommand</a></span></dt><dt><span class="section"><a href="#d0e1776">4.2.15. GetObjectsCommand</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e617"/>4.1. API</h2></div></div></div><p>XML marshalling/unmarshalling of the Drools Commands requires the use
  of special classes, which are going to be described in the following
  sections.</p><p>The following urls show sample script examples for jaxb, xstream and
  json marshalling using:</p><div class="itemizedlist"><ul><li><p>http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</p></li><li><p>http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</p></li><li><p>http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/xstream.mvt?r=HEAD</p></li></ul></div><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e635"/>4.1.1. XStream</h3></div></div></div><p>To use the XStream commands marshaller you need to use the
    DroolsHelperProvider to obtain an XStream instance. We need to use this
    because it has the commands converters registered.</p><div class="itemizedlist"><ul><li><p>Marshalling</p><p>BatchExecutionHelperProviderImpl.newXStreamMarshaller().toXML(command);</p></li><li><p>Unmarshalling</p><p>BatchExecutionHelperProviderImpl.newXStreamMarshaller().fromXML(xml)</p></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e652"/>4.1.2. JSON</h3></div></div></div><p>JSON API to marshalling/unmarshalling is similar to XStream
    API:</p><div class="itemizedlist"><ul><li><p>Marshalling</p><p>BatchExecutionHelper.newJSonMarshaller().toXML(command);</p></li><li><p>Unmarshalling</p><p>BatchExecutionHelper.newJSonMarshaller().fromXML(xml)</p></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e669"/>4.1.3. JAXB</h3></div></div></div><p>There are two options for using JAXB, you can define your model in
    an XSD file or you can have a POJO model. In both cases you have to
    declare your model inside JAXBContext, and in order to do that you need to
    use Drools Helper classes. Once you have the JAXBContext you need to
    create the Unmarshaller/Marshaller as needed.</p><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e675"/>4.1.3.1. Using an XSD file to define the model</h4></div></div></div><p>With your model defined in a XSD file you need to have a
      KnowledgeBase that has your XSD model added as a resource.</p><p>To do this, the XSD file must be added as a XSD ResourceType into
      the KnowledgeBuilder. Finally you can create the JAXBContext using the
      KnowledgeBase created with the KnowledgeBuilder  </p><p/><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Options</span><!-- <br/> --><span class="java_plain">&nbsp;xjcOpts&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Options</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">xjcOpts</span><span class="java_separator">.</span><span class="java_plain">setSchemaLanguage</span><span class="java_separator">(</span><span class="java_type">Language</span><span class="java_separator">.</span><span class="java_plain">XMLSCHEMA</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JaxbConfiguration</span><span class="java_plain">&nbsp;jaxbConfiguration&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">KnowledgeBuilderFactory</span><span class="java_separator">.</span><span class="java_plain">newJaxbConfiguration</span><span class="java_separator">(</span><span class="java_plain">&nbsp;xjcOpts</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;xsd&quot;</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">kbuilder</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_type">ResourceFactory</span><span class="java_separator">.</span><span class="java_plain">newClassPathResource</span><span class="java_separator">(</span><span class="java_literal">&quot;person.xsd&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;getClass</span><span class="java_separator">()),</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceType</span><span class="java_separator">.</span><span class="java_plain">XSD</span><span class="java_separator">,</span><span class="java_plain">&nbsp;jaxbConfiguration</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">KnowledgeBase</span><span class="java_plain">&nbsp;kbase&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;kbuilder</span><span class="java_separator">.</span><span class="java_plain">newKnowledgeBase</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;classesName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">classesName</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;org.drools.test.Person&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_type">JAXBContext</span><span class="java_plain">&nbsp;jaxbContext&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">KnowledgeBuilderHelper</span><span class="java_separator">.</span><span class="java_plain">newJAXBContext</span><span class="java_separator">(</span><span class="java_plain">classesName</span><span class="java_separator">.</span><span class="java_plain">toArray</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[</span><span class="java_plain">classesName</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()]),</span><span class="java_plain">&nbsp;kbase</span><span class="java_separator">);</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e685"/>4.1.3.2. Using a POJO model</h4></div></div></div><p>In this case you need to use DroolsJaxbContextHelper to create the
      JAXBContext. This class has two parameters:</p><p/><div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>classNames: A List with the canonical name of the classes that
          you want to use in the marshalling/unmarshalling process.</p></li><li><p>properties: JAXB custom properties</p></li></ol></div><p/><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">List</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;classNames&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">ArrayList</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">classNames</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;org.drools.test.Person&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JAXBContext</span><span class="java_plain">&nbsp;jaxbContext&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">DroolsJaxbContextHelper</span><span class="java_separator">.</span><span class="java_plain">createDroolsJaxbContext</span><span class="java_separator">(</span><span class="java_plain">classNames</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">Marshaller</span><span class="java_plain">&nbsp;marshaller&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;jaxbContext</span><span class="java_separator">.</span><span class="java_plain">createMarshaller</span><span class="java_separator">();</span></pre><p/></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e702"/>4.2. Commands supported</h2></div></div></div><p>Currently, the following commands are supported:</p><div class="itemizedlist"><ul><li><p>BatchExecutionCommand</p></li><li><p>InsertObjectCommand</p></li><li><p>RetractCommand</p></li><li><p>ModifyCommand</p></li><li><p>GetObjectCommand</p></li><li><p>InsertElementsCommand</p></li><li><p>FireAllRulesCommand</p></li><li><p>StartProcessCommand</p></li><li><p>SignalEventCommand</p></li><li><p>CompleteWorkItemCommand</p></li><li><p>AbortWorkItemCommand</p></li><li><p>QueryCommand</p></li><li><p>SetGlobalCommand</p></li><li><p>GetGlobalCommand</p></li><li><p>GetObjectsCommand</p></li></ul></div><div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>In the next snippets code we are going to use a POJO org.drools.test.Person that has two fields</p><div class="itemizedlist"><ul><li><p>name: String</p></li><li><p>age: Integer</p></li></ul></div></div><div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>In the next examples, to marshall the commands we have used the nexts snippet codes:</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_plain">&nbsp;xml&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionHelper</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">newXStreamMarshaller</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">toXML</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">command</span><!-- <br/> --><span class="java_separator">);</span></pre></li><li><p>JSON</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_plain">&nbsp;xml&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionHelper</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">newJSonMarshaller</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">toXML</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">command</span><!-- <br/> --><span class="java_separator">);</span></pre></li><li><p>JAXB</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">Marshaller</span><!-- <br/> --><span class="java_plain">&nbsp;marshaller&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;jaxbContext</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">createMarshaller</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_type">StringWriter</span><span class="java_plain">&nbsp;xml&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">StringWriter</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">marshaller</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_type">Marshaller</span><span class="java_separator">.</span><span class="java_plain">JAXB_FORMATTED_OUTPUT</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">marshaller</span><span class="java_separator">.</span><span class="java_plain">marshal</span><span class="java_separator">(</span><span class="java_plain">command</span><span class="java_separator">,</span><span class="java_plain">&nbsp;xml</span><span class="java_separator">);</span></pre></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e782"/>4.2.1. BatchExecutionCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: The command that contains a list of commands, which
      will be sent and executed.</p></li><li><p>Attributes</p><div class="table"><a id="d0e793"/><p class="title"><b>Table 4.1. BatchExecutionCommand attributes</b></p><div class="table-contents"><table summary="BatchExecutionCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">lookup</td><td>Sets the knowledge session id on which the commands are
              going to be executed</td><td>true</td></tr><tr><td align="center">commands</td><td>List of commands to be executed</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">InsertObjectCommand</span><span class="java_plain">&nbsp;insertObjectCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">InsertObjectCommand</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_literal">&quot;john&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">25</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_type">FireAllRulesCommand</span><span class="java_plain">&nbsp;fireAllRulesCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FireAllRulesCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">insertObjectCommand</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">fireAllRulesCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fire-all-rules</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":[{"insert":{"object":{"org.drools.test.Person":{"name":"john","age":25}}}},{"fire-all-rules":""}]}} </pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fire-all-rules</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">max</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;-1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e850"/>4.2.2. InsertObjectCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Insert an object in the knowledge session.</p></li><li><p>Attributes</p><div class="table"><a id="d0e861"/><p class="title"><b>Table 4.2. InsertObjectCommand attributes</b></p><div class="table-contents"><table summary="InsertObjectCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">object</td><td>The object to be inserted</td><td>true</td></tr><tr><td align="center">outIdentifier</td><td>Id to identify the FactHandle created in the object
              insertion and added to the execution results</td><td>false</td></tr><tr><td align="center">returnObject</td><td>Boolean to establish if the object must be returned in
              the execution results. Default value: true</td><td>false</td></tr><tr><td align="center">entryPoint</td><td>Entrypoint for the insertion</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">List</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">Command</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;cmds&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">ArrayList</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">Command</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_type">Command</span><span class="java_plain">&nbsp;insertObjectCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CommandFactory</span><span class="java_separator">.</span><span class="java_plain">newInsert</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_literal">&quot;john&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">25</span><span class="java_separator">),</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;john&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">cmds</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">&nbsp;insertObjectCommand&nbsp;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_type">BatchExecutionCommand</span><span class="java_plain">&nbsp;command&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CommandFactory</span><span class="java_separator">.</span><span class="java_plain">createBatchExecution</span><span class="java_separator">(</span><span class="java_plain">cmds</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
</pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">insert</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;john&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entry-point</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;my&nbsp;stream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">return-object</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"insert":{"entry-point":"my stream", "out-identifier":"john","return-object":false,"object":{"org.drools.test.Person":{"name":"john","age":25}}}}}}
</pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">insert</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;john&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entry-point</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;my&nbsp;stream&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e932"/>4.2.3. RetractCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Retract an object from the knowledge session.</p></li><li><p>Attributes</p><div class="table"><a id="d0e943"/><p class="title"><b>Table 4.3. RetractCommand attributes</b></p><div class="table-contents"><table summary="RetractCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">handle</td><td>The FactHandle associated to the object to be
              retracted</td><td>true</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation: we have two options, with the same output
      result:</p><div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Create the Fact Handle from a string</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">RetractCommand</span><span class="java_plain">&nbsp;retractCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">RetractCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">retractCommand</span><span class="java_separator">.</span><span class="java_plain">setFactHandleFromString</span><span class="java_separator">(</span><span class="java_literal">&quot;123:234:345:456:567&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">retractCommand</span><span class="java_separator">);</span></pre></li><li><p>Set the Fact Handle that you received when the object was
          inserted</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">RetractCommand</span><span class="java_plain">&nbsp;retractCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">RetractCommand</span><span class="java_separator">(</span><span class="java_plain">factHandle</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">retractCommand</span><span class="java_separator">);</span></pre></li></ol></div><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">retract</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fact-handle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0:234:345:456:567&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"retract":{"fact-handle":"0:234:345:456:567"}}}}</pre></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">retract</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fact-handle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0:234:345:456:567&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e999"/>4.2.4. ModifyCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allows you to modify a previously inserted object in
      the knowledge session.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1010"/><p class="title"><b>Table 4.4. ModifyCommand attributes</b></p><div class="table-contents"><table summary="ModifyCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">handle</td><td>The FactHandle associated to the object to be
              retracted</td><td>true</td></tr><tr><td align="center">setters</td><td>List of setters object's modifications</td><td>true</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">ModifyCommand</span><span class="java_plain">&nbsp;modifyCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ModifyCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">modifyCommand</span><span class="java_separator">.</span><span class="java_plain">setFactHandleFromString</span><span class="java_separator">(</span><span class="java_literal">&quot;123:234:345:456:567&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Setter</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;setters&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_operator">&lt;</span><span class="java_type">Setter</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">setters</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SetterImpl</span><span class="java_separator">(</span><span class="java_literal">&quot;age&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;30&quot;</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">modifyCommand</span><span class="java_separator">.</span><span class="java_plain">setSetters</span><span class="java_separator">(</span><span class="java_plain">setters</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">modifyCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">modify</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fact-handle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0:234:345:456:567&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">accessor</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;age&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;30&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">modify</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"modify":{"fact-handle":"0:234:345:456:567","setters":{"accessor":"age","value":30}}}}} </pre></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">modify</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fact-handle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0:234:345:456:567&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;30&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">accessor</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;age&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">modify</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1066"/>4.2.5. GetObjectCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Used to get an object from a knowledge session</p></li><li><p>Attributes</p><div class="table"><a id="d0e1077"/><p class="title"><b>Table 4.5. GetObjectCommand attributes</b></p><div class="table-contents"><table summary="GetObjectCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">factHandle</td><td>The FactHandle associated to the object to be
              retracted</td><td>true</td></tr><tr><td align="center">outIdentifier</td><td>Id to identify the FactHandle created in the object
              insertion and added to the execution results</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">GetObjectCommand</span><span class="java_plain">&nbsp;getObjectCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">GetObjectCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">getObjectCommand</span><span class="java_separator">.</span><span class="java_plain">setFactHandleFromString</span><span class="java_separator">(</span><span class="java_literal">&quot;123:234:345:456:567&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">getObjectCommand</span><span class="java_separator">.</span><span class="java_plain">setOutIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;john&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">getObjectCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">get-object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fact-handle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0:234:345:456:567&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;john&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"get-object":{"fact-handle":"0:234:345:456:567","out-identifier":"john"}}}}
</pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">get-object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;john&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fact-handle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0:234:345:456:567&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1134"/>4.2.6. InsertElementsCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Used to insert a list of objects.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1145"/><p class="title"><b>Table 4.6. InsertElementsCommand attributes</b></p><div class="table-contents"><table summary="InsertElementsCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">objects</td><td>The list of objects to be inserted on the knowledge
              session</td><td>true</td></tr><tr><td align="center">outIdentifier</td><td>Id to identify the FactHandle created in the object
              insertion and added to the execution results</td><td>false</td></tr><tr><td align="center">returnObject</td><td>Boolean to establish if the object must be returned in
              the execution results. Default value: true</td><td>false</td></tr><tr><td align="center">entryPoint</td><td>Entrypoint for the insertion</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">List</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">Command</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;cmds&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">ArrayList</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">Command</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Object</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;objects&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_operator">&lt;</span><span class="java_type">Object</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">objects</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_literal">&quot;john&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">25</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">objects</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_literal">&quot;sarah&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">35</span><span class="java_separator">));</span>
</span>
<!--  --><br/><span class="java_type">Command</span><span class="java_plain">&nbsp;insertElementsCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CommandFactory</span><span class="java_separator">.</span><span class="java_plain">newInsertElements</span><span class="java_separator">(</span><span class="java_plain">&nbsp;objects&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">cmds</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">&nbsp;insertElementsCommand&nbsp;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_type">BatchExecutionCommand</span><span class="java_plain">&nbsp;command&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CommandFactory</span><span class="java_separator">.</span><span class="java_plain">createBatchExecution</span><span class="java_separator">(</span><span class="java_plain">cmds</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">insert-elements</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sarah</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">35</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">insert-elements</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"insert-elements":{"objects":[{"containedObject":{"@class":"org.drools.test.Person","name":"john","age":25}},{"containedObject":{"@class":"org.drools.test.Person","name":"sarah","age":35}}]}}}} </pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">insert-elements</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">return-objects</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">objects</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">objects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">objects</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">35</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sarah</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">objects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">insert-elements</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1216"/>4.2.7. FireAllRulesCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allow execution of the rules activations
      created.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1227"/><p class="title"><b>Table 4.7. FireAllRulesCommand attributes</b></p><div class="table-contents"><table summary="FireAllRulesCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">max</td><td>The max number of rules activations to be executed.
              default is -1 and will not put any restriction on
              execution</td><td>false</td></tr><tr><td align="center">outIdentifier</td><td>Add the number of rules activations fired on the
              execution results</td><td>false</td></tr><tr><td align="center">agendaFilter</td><td>Allow the rules execution using an Agenda Filter</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">FireAllRulesCommand</span><span class="java_plain">&nbsp;fireAllRulesCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FireAllRulesCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">fireAllRulesCommand</span><span class="java_separator">.</span><span class="java_plain">setMax</span><span class="java_separator">(</span><span class="java_literal">10</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">fireAllRulesCommand</span><span class="java_separator">.</span><span class="java_plain">setOutIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;firedActivations&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">fireAllRulesCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fire-all-rules</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">max</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;10&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firedActivations&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"fire-all-rules":{"max":10,"out-identifier":"firedActivations"}}}}</pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fire-all-rules</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firedActivations&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">max</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;10&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1291"/>4.2.8. StartProcessCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allows you to start a process using the ID. Also you
      can pass parameters and initial data to be inserted.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1302"/><p class="title"><b>Table 4.8. StartProcessCommand attributes</b></p><div class="table-contents"><table summary="StartProcessCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">processId</td><td>The ID of the process to be started</td><td>true</td></tr><tr><td align="center">parameters</td><td>A Map&lt;String, Object&gt; to pass parameters in the
              process startup</td><td>false</td></tr><tr><td align="center">data</td><td>A list of objects to be inserted in the knowledge session
              before the process startup</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">StartProcessCommand</span><span class="java_plain">&nbsp;startProcessCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">StartProcessCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">startProcessCommand</span><span class="java_separator">.</span><span class="java_plain">setProcessId</span><span class="java_separator">(</span><span class="java_literal">&quot;org.drools.task.processOne&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">startProcessCommand</span><span class="java_separator">);</span></pre></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-process</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">processId</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.task.processOne&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"start-process":{"process-id":"org.drools.task.processOne"}}}} </pre></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-process</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">processId</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.task.processOne&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">parameter</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">start-process</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ul></div></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1361"/>4.2.9. SignalEventCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Send a signal event.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1372"/><p class="title"><b>Table 4.9. SignalEventCommand attributes</b></p><div class="table-contents"><table summary="SignalEventCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">event-type</td><td> </td><td>true</td></tr><tr><td align="center">processInstanceId</td><td> </td><td>false</td></tr><tr><td align="center">event</td><td> </td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">SignalEventCommand</span><span class="java_plain">&nbsp;signalEventCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SignalEventCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">signalEventCommand</span><span class="java_separator">.</span><span class="java_plain">setProcessInstanceId</span><span class="java_separator">(</span><span class="java_literal">1001</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">signalEventCommand</span><span class="java_separator">.</span><span class="java_plain">setEventType</span><span class="java_separator">(</span><span class="java_literal">&quot;start&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">signalEventCommand</span><span class="java_separator">.</span><span class="java_plain">setEvent</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_literal">&quot;john&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">25</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">signalEventCommand</span><span class="java_separator">);</span></pre></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">signal-event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">process-instance-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1001&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;start&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">org.drools.pipeline.camel.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">org.drools.pipeline.camel.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">signal-event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"signal-event":{"process-instance-id":1001,"@event-type":"start","event-type":"start","object":{"org.drools.pipeline.camel.Person":{"name":"john","age":25}}}}}}</pre></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">signal-event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;start&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">process-instance-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1001&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">25</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">signal-event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1430"/>4.2.10. CompleteWorkItemCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allows you to complete a WorkItem.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1441"/><p class="title"><b>Table 4.10. CompleteWorkItemCommand attributes</b></p><div class="table-contents"><table summary="CompleteWorkItemCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">workItemId</td><td>The ID of the WorkItem to be completed</td><td>true</td></tr><tr><td align="center">results</td><td> </td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">CompleteWorkItemCommand</span><span class="java_plain">&nbsp;completeWorkItemCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">CompleteWorkItemCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">completeWorkItemCommand</span><span class="java_separator">.</span><span class="java_plain">setWorkItemId</span><span class="java_separator">(</span><span class="java_literal">1001</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">completeWorkItemCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">complete-work-item</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1001&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"complete-work-item":{"id":1001}}}} </pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">complete-work-item</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1001&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1497"/>4.2.11. AbortWorkItemCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allows you abort an WorkItem. The same as
      session.getWorkItemManager().abortWorkItem(workItemId)</p></li><li><p>Attributes</p><div class="table"><a id="d0e1508"/><p class="title"><b>Table 4.11. AbortWorkItemCommand attributes</b></p><div class="table-contents"><table summary="AbortWorkItemCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">workItemId</td><td>The ID of the WorkItem to be completed</td><td>true</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">AbortWorkItemCommand</span><span class="java_plain">&nbsp;abortWorkItemCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">AbortWorkItemCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">abortWorkItemCommand</span><span class="java_separator">.</span><span class="java_plain">setWorkItemId</span><span class="java_separator">(</span><span class="java_literal">1001</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">abortWorkItemCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">abort-work-item</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1001&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"abort-work-item":{"id":1001}}}} </pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">abort-work-item</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1001&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1558"/>4.2.12. QueryCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Executes a query defined in knowledge base.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1569"/><p class="title"><b>Table 4.12. QueryCommand attributes</b></p><div class="table-contents"><table summary="QueryCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">name</td><td>The query name</td><td>true</td></tr><tr><td align="center">outIdentifier</td><td>The identifier of the query results. The query results
              are going to be added in the execution results with this
              identifier</td><td>false</td></tr><tr><td align="center">arguments</td><td>A list of objects to be passed as a query
              parameter</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">QueryCommand</span><span class="java_plain">&nbsp;queryCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">QueryCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">queryCommand</span><span class="java_separator">.</span><span class="java_plain">setName</span><span class="java_separator">(</span><span class="java_literal">&quot;persons&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">queryCommand</span><span class="java_separator">.</span><span class="java_plain">setOutIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;persons&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">queryCommand</span><span class="java_separator">);</span></pre></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">query</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persons&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persons&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"query":{"out-identifier":"persons","name":"persons"}}}} </pre></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">query</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persons&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persons&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1630"/>4.2.13. SetGlobalCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allows you to set a global.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1641"/><p class="title"><b>Table 4.13. SetGlobalCommand attributes</b></p><div class="table-contents"><table summary="SetGlobalCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">identifier</td><td>The identifier of the global defined in the knowledge
              base</td><td>true</td></tr><tr><td align="center">object</td><td>The object to be setted into the global</td><td>false</td></tr><tr><td align="center">out</td><td>A boolean to add, or not, the set global result into the
              execution results</td><td>false</td></tr><tr><td align="center">outIdentifier</td><td>The identifier of the global execution result</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">SetGlobalCommand</span><span class="java_plain">&nbsp;setGlobalCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SetGlobalCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">setGlobalCommand</span><span class="java_separator">.</span><span class="java_plain">setIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;helper&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">setGlobalCommand</span><span class="java_separator">.</span><span class="java_plain">setObject</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_literal">&quot;kyle&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">30</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">setGlobalCommand</span><span class="java_separator">.</span><span class="java_plain">setOut</span><span class="java_separator">(</span><span class="java_literal">true</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">setGlobalCommand</span><span class="java_separator">.</span><span class="java_plain">setOutIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;output&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">setGlobalCommand</span><span class="java_separator">);</span></pre></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-global</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helper&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;output&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">kyle</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">30</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">org.drools.test.Person</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-global</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"set-global":{"identifier":"helper","out-identifier":"output","object":{"org.drools.test.Person":{"name":"kyle","age":30}}}}}}</pre></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-global</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;output&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helper&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">30</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">age</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">kyle</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-global</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1708"/>4.2.14. GetGlobalCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Allows you to get a global previously defined.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1719"/><p class="title"><b>Table 4.14. GetGlobalCommand attributes</b></p><div class="table-contents"><table summary="GetGlobalCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">identifier</td><td>The identifier of the global defined in the knowledge
              base</td><td>true</td></tr><tr><td align="center">outIdentifier</td><td>The identifier to be used in the execution
              results</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">GetGlobalCommand</span><span class="java_plain">&nbsp;getGlobalCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">GetGlobalCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">getGlobalCommand</span><span class="java_separator">.</span><span class="java_plain">setIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;helper&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">getGlobalCommand</span><span class="java_separator">.</span><span class="java_plain">setOutIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;helperOutput&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">getGlobalCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">get-global</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helper&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helperOutput&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"get-global":{"identifier":"helper","out-identifier":"helperOutput"}}}} </pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">get-global</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helperOutput&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helper&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1776"/>4.2.15. GetObjectsCommand</h3></div></div></div><p/><div class="itemizedlist"><ul><li><p>Description: Returns all the objects from the current session as a
      Collection.</p></li><li><p>Attributes</p><div class="table"><a id="d0e1787"/><p class="title"><b>Table 4.15. GetObjectsCommand attributes</b></p><div class="table-contents"><table summary="GetObjectsCommand attributes" border="1"><colgroup><col align="center"/><col/><col/></colgroup><thead><tr><th align="center">Name</th><th align="center">Description</th><th align="center">required</th></tr></thead><tbody><tr><td align="center">objectFilter</td><td>An ObjectFilter to filter the objects returned from the
              current session</td><td>false</td></tr><tr><td align="center">outIdentifier</td><td>The identifier to be used in the execution
              results</td><td>false</td></tr></tbody></table></div></div><br class="table-break"/></li><li><p>Command creation</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_plain">&nbsp;command&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BatchExecutionCommand</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">setLookup</span><span class="java_separator">(</span><span class="java_literal">&quot;ksession1&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">GetObjectsCommand</span><span class="java_plain">&nbsp;getObjectsCommand&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">GetObjectsCommand</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">getObjectsCommand</span><span class="java_separator">.</span><span class="java_plain">setOutIdentifier</span><span class="java_separator">(</span><span class="java_literal">&quot;objects&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">command</span><span class="java_separator">.</span><span class="java_plain">getCommands</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">getObjectsCommand</span><span class="java_separator">);</span></pre><p/></li><li><p>XML output</p><div class="itemizedlist"><ul><li><p>XStream</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">get-objects</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;objects&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li><li><p>JSON</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">{"batch-execution":{"lookup":"ksession1","commands":{"get-objects":{"out-identifier":"objects"}}}}</pre><p/></li><li><p>JAXB</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;standalone=&quot;yes&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">batch-execution</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lookup</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ksession1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">get-objects</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">out-identifier</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;objects&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">batch-execution</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p/></li></ul></div></li></ul></div><p/></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e1844"/>Chapter 5. OSGi Integration</h2></div></div></div><p>OSGi is a dynamic module system for declarative services. So what does
  that mean? Each jar in OSGi is called a bundle and has it's own Classloader.
  Each bundle specifies the packages it exports (makes publicly available) and
  which packages it imports (external dependencies). OSGi will use this
  information to wire the classloaders of different bundles together; the key
  distinction is you don't specify what bundle you depend on, or have a single
  monolithic classpath, instead you specify your package import and version
  and OSGi attempts to satisfy this from available bundles.</p><p>It also supports side by side versioning, so you can have multiple
  versions of a bundle installed and it'll wire up the correct one. Further to
  this Bundles can register services for other bundles to use. These services
  need initialisation, which can cause ordering problems - how do you make
  sure you don't consume a service before its registered? OSGi has a number of
  features to help with service composition and ordering. The two main ones
  are the programmatic ServiceTracker and the xml based Declarative Services.
  There are also other projects that help with this; Spring DM, iPOJO,
  Gravity.</p><p>Each of the Drools factories is now also available as a FactoryService
  interface. You can either have OSGi inject those into a pojo, or retrieve
  them yourself from OSGi.</p><p>The following modules should work with OSGi;</p><div class="itemizedlist"><ul><li><p>knowledge-api</p></li><li><p>drools-core</p></li><li><p>drools-compiler</p></li><li><p>drools-templates</p></li><li><p>drools-decisiontables</p></li></ul></div><p>The following Services can be located as OSGi Bundles</p><div class="itemizedlist"><ul><li><p>KnowledgeBuilderFactoryService</p></li><li><p>KnowledgeBaseFactoryService</p></li><li><p>ResourceFactroryService</p></li></ul></div><p> I'll cover injection here. The below example injects the
  KnowledgeBuilderFacotryService, KnowledgeBaseFactoryService and
  ResourecFactoryService into the TestComponent pojo.</p><div class="example"><a id="d0e1885"/><p class="title"><b>Example 5.1. Osgi Declarative Services</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">scr:component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:scr</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.osgi.org/xmlns/scr/v1.1.0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">implementation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;testosgi.TestComponent&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">reference</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bind</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;setKnowledgeBaseFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">unbind</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;unsetKnowledgeBaseFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">interface</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.KnowledgeBaseFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">reference</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bind</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;setResourceFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">unbind</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;unsetResourceFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">interface</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.io.ResourceFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">reference</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bind</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;setKnowledgeBuilderFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">unbind</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;unsetKnowledgeBuilderFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">interface</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.drools.builder.KnowledgeBuilderFactoryService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">target</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;(org.drools.compiler.DecisionTableProvider=true)&quot;</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">scr:component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p>The TestComponent will only be activated when all of the referenced
  services are available and injected into the pojo. You'll also notice the
  "target" attribute for the KnowledgeBuilderFactoryService. The reason for
  this is that OSGi DS has no built in way to declaratively say which optional
  services must be present to satisfy your component. As a work around I made
  any Drools service that has optional services set a property if/when the
  optional service is available. Filters can then be applied, via the target
  attribute, to make sure the Service is in a desired state before consuming
  it. And that is pretty much it :)</p><div class="example"><a id="d0e1892"/><p class="title"><b>Example 5.2. Basic Rule Compilation</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">ServiceReference serviceRef = bundleContext.getServiceReference( ServiceRegistry.class.getName() );
ServiceRegistry registry = (ServiceRegistry) bundleContext.getService( serviceRef );

KnowledgeBuilderFactoryService knowledgeBuilderFactoryService = registry.get( KnowledgeBuilderFactoryService.class );
        
KnowledgeBaseFactoryService knowledgeBaseFactoryService = registry.get( KnowledgeBaseFactoryService.class );
ResourceFactoryService resourceFactoryService = registry.get( ResourceFactoryService.class );

KnowledgeBuilderConfiguration kbConf = knowledgeBuilderFactoryService.newKnowledgeBuilderConfiguration( null,
                                                                                                        getClass().getClassLoader() );

KnowledgeBuilder kbuilder = knowledgeBuilderFactoryService.newKnowledgeBuilder( kbConf );
ResourceFactoryService resource = resourceFactoryService;
kbuilder.add( resource.newByteArrayResource( string.getBytes() ),
              ResourceType.DRL );

if ( kbuilder.hasErrors() ) {
     System.out.println( kbuilder.getErrors() );
     throw new RuntimeException( kbuilder.getErrors().toString() );
}

KnowledgeBaseConfiguration kbaseConf = knowledgeBaseFactoryService.newKnowledgeBaseConfiguration( null,
                                                                                                  getClass().getClassLoader() );

KnowledgeBase kbase = knowledgeBaseFactoryService.newKnowledgeBase( kbaseConf );
kbase.addKnowledgePackages( kbuilder.getKnowledgePackages() );
StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
</pre></div></div><br class="example-break"/><div class="example"><a id="d0e1897"/><p class="title"><b>Example 5.3. Decision Table Example</b></p><div class="example-contents"><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">ServiceReference serviceRef = bundleContext.getServiceReference( ServiceRegistry.class.getName() );
ServiceRegistry registry = (ServiceRegistry) bundleContext.getService( serviceRef );

KnowledgeBuilderFactoryService knowledgeBuilderFactoryService = registry.get( KnowledgeBuilderFactoryService.class );
KnowledgeBaseFactoryService knowledgeBaseFactoryService = registry.get( KnowledgeBaseFactoryService.class );
ResourceFactoryService resourceFactoryService = registry.get( ResourceFactoryService.class );

KnowledgeBaseConfiguration kbaseConf = knowledgeBaseFactoryService.newKnowledgeBaseConfiguration( null,
                                                                                                  getClass().getClassLoader() );

KnowledgeBuilderConfiguration kbConf = knowledgeBuilderFactoryService.newKnowledgeBuilderConfiguration( null,
                                                                                                        getClass().getClassLoader() );
KnowledgeBuilder kbuilder = knowledgeBuilderFactoryService.newKnowledgeBuilder( kbConf );
kbuilder.add( resourceFactoryService.newClassPathResource( "changeset1Test.xml",
                                                           Dummy.class ),
              ResourceType.CHANGE_SET );

kbaseConf = knowledgeBaseFactoryService.newKnowledgeBaseConfiguration( null,
                                                                       getClass().getClassLoader() );
KnowledgeBase kbase = knowledgeBaseFactoryService.newKnowledgeBase( kbaseConf );
kbase.addKnowledgePackages( kbuilder.getKnowledgePackages() );

StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
</pre></div></div><br class="example-break"/></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="d0e1902"/>Index</h2></div></div></div><div class="index"/></div></div></body></html>